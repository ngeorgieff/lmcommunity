{
  "id" : 13104230,
  "description" : "Tracks stock prices for symbols defined in the \"stocks\" property. Data from finnhub.io.",
  "group" : "_WeenigWare Community",
  "appliesTo" : "finnhub.api.key\t&& stocks",
  "technology" : "Must have an API key for Finnhub.io. The API key must be saved as a new custom property under the device you want to run this datasource on called, \"finnhub.api.key\" with the value being the API Key.\nCreate a comma, space, or pipe separated list of ticker symbols as a property called \"stocks\".",
  "tags" : "",
  "checksum" : "a86ed260118f6211e5ef2a4d38fbf128",
  "lineageId" : "pkXb2Fe5QICG-XFQb-k2_g",
  "name" : "StockPrice",
  "displayName" : "Stock Price",
  "version" : 1585667449,
  "auditVersion" : 0,
  "hasMultiInstances" : true,
  "collectInterval" : 120,
  "collectMethod" : "batchscript",
  "collectorAttribute" : {
    "name" : "batchscript",
    "linuxCmdline" : "",
    "linuxScript" : "",
    "groovyScript" : "import groovy.json.JsonSlurper\nstocks = hostProps.get(\"stocks\").tokenize(\",| \")\ntoken = hostProps.get(\"finnhub.api.key\")\nstocks.each{\n  try {\n    url = \"https://finnhub.io/api/v1/quote?token=${token}&symbol=${it}\"\n    jsondata = url.toURL().getText()\n    data = new JsonSlurper().parseText(jsondata)\n    // println(data)\n    data.each{k,v->\n      println(\"${it}.${k}: ${v}\")\n    }\n  } catch (Exception e) {println(e);return 1}\n}\nreturn 0",
    "scriptType" : "embed",
    "windowsCmdline" : "",
    "windowsScript" : ""
  },
  "enableAutoDiscovery" : true,
  "autoDiscoveryConfig" : {
    "persistentInstance" : false,
    "disableInstance" : false,
    "deleteInactiveInstance" : true,
    "instanceAutoGroupMethod" : "none",
    "instanceAutoGroupMethodParams" : "",
    "scheduleInterval" : 0,
    "method" : {
      "name" : "ad_script",
      "type" : "embeded",
      "winScript" : null,
      "winCmdline" : null,
      "linuxCmdline" : null,
      "linuxScript" : null,
      "groovyScript" : "import groovy.json.JsonSlurper\nstocks = hostProps.get(\"stocks\").tokenize(\",| \")\ntoken = hostProps.get(\"finnhub.api.key\")\nstocks.each{\n  try {\n    url = \"https://finnhub.io/api/v1/stock/profile?token=${token}&symbol=${it}\"\n    // println(url)\n    jsondata = url.toURL().getText()\n    data = new JsonSlurper().parseText(jsondata)\n    // println(data)\n    println(\"${it}##${data.name}##${data.weburl}####address=${data.address} ${data.city} ${data.state}&phone=${data.phone}&exchange=${data.exchange}&currency=${data.currency}\")\n  } catch (Exception e) {println(e);return 1}\n}\nreturn 0\n"
    },
    "filters" : [ ]
  },
  "dataPoints" : [ {
    "id" : 17678,
    "dataSourceId" : 13104230,
    "name" : "ExecutionTime",
    "description" : "",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 4,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "responseTime",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  }, {
    "id" : 17679,
    "dataSourceId" : 13104230,
    "name" : "currentPrice",
    "description" : "Current price",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "namevalue",
    "postProcessorParam" : "##WILDVALUE##.c",
    "rawDataFieldName" : "output",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  }, {
    "id" : 17680,
    "dataSourceId" : 13104230,
    "name" : "highPrice",
    "description" : "High price of the day",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "namevalue",
    "postProcessorParam" : "##WILDVALUE##.h",
    "rawDataFieldName" : "output",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  }, {
    "id" : 17681,
    "dataSourceId" : 13104230,
    "name" : "lowPrice",
    "description" : "Low price of the day",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "namevalue",
    "postProcessorParam" : "##WILDVALUE##.l",
    "rawDataFieldName" : "output",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  }, {
    "id" : 17682,
    "dataSourceId" : 13104230,
    "name" : "openPrice",
    "description" : "Open price of the day",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "namevalue",
    "postProcessorParam" : "##WILDVALUE##.o",
    "rawDataFieldName" : "output",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  }, {
    "id" : 17683,
    "dataSourceId" : 13104230,
    "name" : "previousClose",
    "description" : "Previous close price",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "namevalue",
    "postProcessorParam" : "##WILDVALUE##.pc",
    "rawDataFieldName" : "output",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  } ],
  "enableEriDiscovery" : false,
  "eriDiscoveryInterval" : -1,
  "eriDiscoveryConfig" : null
}